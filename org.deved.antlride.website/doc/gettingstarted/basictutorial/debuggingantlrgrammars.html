<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Debugging your grammars</title>
<link rel="stylesheet" type="text/css" href="../css/stylesheet.css" />
</head>

<body>
<h1>Debugging your grammars</h1>
<p>In this section, you will learn more about debugging ANTLR
grammars in the workbench.</p>
<h3>System Requirements and limitations</h3>
<ul>
	<li><a href="http://www.eclipse.org/jdt/">Eclipse Java
	development tools (JDT).</a></li>
	<li>ANTLR IDE- JDT Integration Plug-in.</li>
	<li>This feature is only available for Java grammars
	(language=Java).</li>
</ul>
<h2>ANTLR Breakpoints</h2>
<ul>
	<li><strong>Location Breakpoint</strong>: this kind of breakpoint
	allow you to suspend the execution at one specific location. Parser
	rules only support location breakpoints</li>
	<li><strong>LT Breakpoint</strong>: this kind of breakpoint allow
	you to suspend the execution before the parser consume a token. Usually
	used with lexer rules</li>
	<li><strong>Consume Breakpoint</strong>: this kind of breakpoint
	allow you to suspend the execution after the parser consume a token.
	Usually used with lexer rules</li>
</ul>
<ol>
	<li>Double click in Expr.g file to open it with the ANTLR editor.</li>
	<li>Select the "INT" rule inside the "atom" rule. Right click on
	the rule an select <strong>ANTLR Breakpoints</strong>. Note that you
	can not add breakpoints by double click.</li>
	<p><img alt="Add ANTLR Breakpoints"
		src="../../images/addbreakpoint.png"></p>
	<li>The "ANTLR Breakpoints" dialog show information about the
	selected element. In the breakpoint type list select <strong>LT</strong>
	and click OK.</li>
	<p><img alt="LT ANTLR Breakpoint"
		src="../../images/ltbreakpoint.png"></p>
	<li>The breakpoints are displayed in the vertical rule. To remove
	a breakpoint you need to open <strong>Breakpoints</strong> view and
	remove it from there.</li>
	<p><img alt="LT ANTLR Breakpoint"
		src="../../images/ltbreakpointadded.png"></p>
	<li>Select <strong>Interpreter</strong> page</li>
	<li>Select the "prog" rule in the <strong>Rule Panel</strong></li>
	<li>Select the "simpleTest" test case in the <strong>Test
	Panel</strong></li>
	<li>Select the "Debug (Java)" button</li>
	<p><img alt="ANTLR Console" src="../../images/debugjavaapp.png">
	</p>
	<p>The "Run (Java)"/"Debug (Java)" button are available for saved
	test case</p>
	<p>You can only run/debug combined/parser grammars</p>
	<li>In the <strong>Confirm Perspective Switch</strong> dialog
	click Yes.</li>
	<p><img alt="ANTLR Console" src="../../images/switchdialog.png">
	</p>
	<li>The ANTLR debug perspective.</li>
	<p><img alt="ANTLR Console" src="../../images/antlrdebugmode.png">
	</p>
	<li>Let's take a look at each view.</li>
	<li>The <strong>Debug</strong> view.</li>
	<p><img alt="ANTLR Debug View" src="../../images/thedebugview.png">
	</p>
	<p>This view show the rule invocation stack to the current
	breakpoint. You can click on any element to follow the invocation path
	to the current breakpoint.</p>
	<li>The <strong>ANTLR Debug Events</strong> view.</li>
	<p><img alt="ANTLR Debug Events View"
		src="../../images/thedebugeventsview.png"></p>
	<p>This view show the debug events generated by ANTLR. The first
	event (<strong>LT INT 1:0 "3"</strong>) is the last event generated by
	ANTLR, here you can see the next token ("3") to be consumed by ANTLR.</p>
	<li>The <strong>ANTLR Debug Tree</strong> view.</li>
	<p><img alt="ANTLR Debug Tree View"
		src="../../images/thedebugtreeview.png"></p>
	<p>This view show a tree representation of the rules matched by
	ANTLR.</p>
	<li>The <strong>ANTLR Debug Input</strong> view.</li>
	<p><img alt="ANTLR Debug Input View"
		src="../../images/thedebuginputview.png"></p>
	<p>This view show the current input consumed by ANTLR. At this
	point there is any token consumed yet. Click on the resume button on
	the <strong>Debug</strong> view.</p>
	<p><img alt="ANTLR Debug Input View"
		src="../../images/thedebuginputview2.png"></p>
	<p>Now you can see the previous token "3" already consumed by ANTLR
	and in the <strong>ANTLR Debug Events</strong> view you can see the
	next token ("6") before be consumed by ANTLR.</p>
	<li>Click on the resume button on the <strong>Debug</strong> view
	to resume the program.</li>
	<li>The text "9" is displayed in the <strong>Console</strong>
	view.</li>
</ol>
<a href="http://sourceforge.net"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=213306&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" /></a>
</body>
</html>